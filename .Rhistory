ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0,y=Inf,label=paste0(
"prev=\n",sprintf("%.3f",prevalence)
),vjust=1,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0.01,y=0.01,label=paste0(
"prev=",sprintf("%.3f",prevalence)
),vjust=1,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0.01,y=Inf,label=paste0(
"prev=",sprintf("%.3f",prevalence)
),vjust=1.2,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0.01,y=Inf,label=paste0(
"prev=",sprintf("%.3f",prevalence)
),vjust=1.5,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0.01,y=Inf,label=paste0(
"prev=",sprintf("%.3f",prevalence)
),vjust=2,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0.01,y=Inf,label=paste0(
"prev=",sprintf("%.1f%%",prevalence*100)
),vjust=2,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot()
#cr$plotDensity()
#cr$plotStats()
#cr$plotStats(vars(pmi_x1y1,pmi_x0y1,pmi_x1y0,pmi_x0y0,I))
#cr$plotPR()
cr$distributionStats()
cr$plot() %>% standardPrintOutput::saveThirdPageFigure("~/Dropbox/classifierResult/clotting")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveThirdPageFigure("~/Dropbox/classifierResult/clotting")
?geom_text_repel
ggplot(tmp, aes(x=false_pos_rate, y=true_pos_rate))+
geom_path()+
xlab("false positive rate")+
ylab("true positive rate")+
geom_segment(x=0,y=0, xend=1, yend=1, colour="grey75",linetype="dashed")+
expand_limits(x=c(0,1),y=c(0,1))+
annotate("text",x=0.99,y=0.01,label=paste0(
"AUC=",sprintf("%.3f",stats$auroc),
"\nMI=",sprintf("%.3f",stats$mutualInfo)
),vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
geom_point(aes(x=false_pos_rate, y=true_pos_rate, colour=max_of),data=annotations)+
ggrepel::geom_text_repel(
aes(x=false_pos_rate, y=true_pos_rate, colour=max_of, label=paste0("max ",max_of)), hjust=0,vjust=1, nudge_x=0.01,nudge_y=-0.01,data=annotations,
direction = "y",
size=(10/ggplot2:::.pt/(96/72)))+
scale_colour_brewer(type="qual",palette="Dark2")+
guides(colour="none")
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,
direction = "y",
size=(10/ggplot2:::.pt/(96/72)))+
annotate("text",x=0.01,y=Inf,label=paste0(
"prev=",sprintf("%.1f%%",prevalence*100)
),vjust=2,hjust=0,size=(10/ggplot2:::.pt/(96/72)))
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveThirdPageFigure("~/Dropbox/classifierResult/clotting")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveThirdPageFigure("~/Dropbox/classifierResult/clotting")
devtools::document("~/Git/standard-print-output/")
devtools::load_all("~/Git/standard-print-output/")
cr$plot() %>% standardPrintOutput::saveQuarterPageFigure("~/Dropbox/classifierResult/clotting")
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_segment(aes(x=0,y=p_x1, xend=1, yend=p_x1), colour="grey75",linetype="dashed")+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_segment(aes(x=0,y=p_x1, xend=1, yend=p_x1), data = tmp, colour="grey75",linetype="dashed")+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
?geom_hline
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text("text",aes(yintercept=p_x1),x=0.01,label="prevalence"),vjust=0,hjust=0,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text("text",aes(yintercept=p_x1),x=0.01,label="prevalence",vjust=0,hjust=0,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(yintercept=p_x1),x=0.01,label="prevalence",vjust=0,hjust=0,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1),data = tmp,x=0.01,label="prevalence",vjust=0,hjust=0,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1),data = tmp,x=0.01,label="prevalence", colour="grey75",vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=1,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1),data = tmp,x=0.01,label="prevalence", colour="grey75",vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1),data = tmp,x=0.01,label="prevalence", fill="grey75",vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1,colour="grey75"),data = tmp,x=0.01,label="prevalence",vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))+
xlab(paste0("prediction ",self$positive))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1,colour="grey75"),data = tmp,x=0.01,label="prevalence",vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_text(aes(y=p_x1),data = tmp,x=0.01,label="prevalence",vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dashed")+
geom_hline(aes(yintercept=1-p_x1), data = tmp, colour="grey75",linetype="dashed")+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
?linetype
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey75",linetype="dotted")+
geom_hline(aes(yintercept=1-p_x1), data = tmp, colour="grey75",linetype="dashed")+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
ggplot()+
geom_density(aes(x=probability, y=stat(count)/total,fill=obs), data = tmp,colour="black",alpha=0.3) +
geom_rug(aes(x=probability, colour=obs), data = tmp, sides="b", alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
geom_hline(aes(yintercept=p_x1), data = tmp, colour="grey25",linetype="dotted")+
geom_hline(aes(yintercept=1-p_x1), data = tmp, colour="grey25",linetype="dashed")+
ggnewscale::new_scale_colour()+
scale_colour_brewer(type="qual",palette="Dark2")+
geom_vline(aes(xintercept=probability, colour=max_of),data=annotations, show.legend = FALSE)+
ggrepel::geom_text_repel(
aes(x=probability, y=Inf, colour=max_of, label=paste0("max ",max_of)),data=annotations, hjust=0,vjust=1, angle=90, show.legend = FALSE,box.padding=0.05,
size=(10/ggplot2:::.pt/(96/72)))
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveQuarterPageFigure("~/Dropbox/classifierResult/clotting")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveQuarterPageFigure("~/Dropbox/classifierResult/clotting")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveQuarterPageFigure("~/Dropbox/classifierResult/clotting")
ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()
ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()+labs(colour="statistic")
ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()+labs(colour=NA)
ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()+labs(colour="none")
ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()+labs(colour=NULL)
ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()+labs(colour=NULL)+standardPrintOutput::narrowAndTall()
tmp_plot = ggplot(annotations,aes(colour=paste0("max ",max_of),x=specificity,y=sensitivity))+geom_point()+labs(colour=NULL)+standardPrintOutput::narrowAndTall()
legend = ggpubr::get_legend(tmp_plot)
legend
?wrap_plots
?patchwork::wrap_elements
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot() %>% standardPrintOutput::saveQuarterPageFigure("~/Dropbox/classifierResult/clotting")
?geom_point
?ggplot2::Position
?ggplot2::position_jitter
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
(cr$plot(legend=FALSE) /
cr$plot()) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
cr$plot(legend=FALSE)
?position_dodge
cr$plot()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
(
cr$plot(legend=FALSE) +
cr$plot() + patchwork::plot_layout(ncol=1)
) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
cr$plot(legend=FALSE)
cr$plot() + patchwork::plot_layout(ncol=1)
cr$plot()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot()
?geom_bar
ggplot(annotations,aes(colour=paste0("max ",max_of),fill=obs,x=specificity,y=sensitivity))+geom_bar()+
labs(colour="statistic")+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
ggplot(annotations,aes(colour=paste0("max ",max_of),fill=obs,x=specificity))+geom_bar()+
labs(colour="statistic")+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
ggplot(annotations,aes(x=specificity))+
geom_bar(aes(fill=obs),alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity))+
labs(colour="statistic")+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
annotations = self$maxValues(vars(accuracy,f1,mcc,informedness,I))
ggplot(annotations,aes(x=specificity))+
geom_bar(aes(fill=obs),alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity))+
labs(colour="statistic")+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
annotations2 = cr$maxValues(vars(accuracy,f1,mcc,informedness,I))
ggplot(annotations2,aes(x=specificity))+
geom_bar(aes(fill=obs),alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity))+
labs(colour="statistic")+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
ggplot(annotations2,aes(x=specificity))+
geom_bar(aes(fill=obs),alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity))+
geom_vline(aes(colour=paste0("max ",max_of),xintercept=specificity))+
labs(colour="statistic")+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
ggplot(annotations2,aes(x=specificity))+
geom_bar(aes(fill=obs),alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity))+
geom_vline(aes(colour=paste0("max ",max_of),xintercept=specificity))+
labs(colour=NULL,fill=NULL)+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
ggplot(annotations2,aes(x=specificity))+
geom_bar(aes(fill=obs),colour="black",alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity))+
geom_vline(aes(colour=paste0("max ",max_of),xintercept=specificity))+
labs(colour=NULL,fill=NULL)+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
devtools::load_all()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plot()
cr$plotLegend()
cr$plot() + cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(0.9,0.1))
library(patchwork)
cr$plot() + cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(0.9,0.1))
{cr$plot()} + cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(0.9,0.1))
cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(0.9,0.1))
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
(
cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(0.9,0.1))
) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
cr$plot()
cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(0.9,0.1))
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
(
cr$plot() / cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(1,1,0.1))
) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
cr$plot() / cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(1,1,0.1)
)
cr$plotLegend()
tmp_plot =
ggplot(annotations2,aes(x=specificity))+
geom_bar(aes(fill=obs),colour="black",alpha=0.3)+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity),alpha=0.75)+
geom_vline(aes(colour=paste0("max ",max_of),xintercept=specificity),alpha=0.75)+
labs(colour=NULL,fill=NULL)+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
tmp_plot
ggplot(annotations2,aes(x=specificity))+
geom_bar(aes(fill=obs),colour="black",alpha=0.3,position = "identity")+
geom_point(aes(colour=paste0("max ",max_of),y=sensitivity),alpha=0.75)+
geom_vline(aes(colour=paste0("max ",max_of),xintercept=specificity),alpha=0.75)+
labs(colour=NULL,fill=NULL)+standardPrintOutput::narrowAndTall()+
scale_colour_brewer(type="qual",palette="Dark2")+
scale_fill_brewer(type="qual",palette="Set1")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
(
cr$plot() / cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(1,1,0.1))
)
(
cr$plot() / cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(1,1,0.1))
) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
#(cr$plot() / cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(1,1,0.1))
#) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
cr$plotROC()
cr$plotRoc()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
#(cr$plot() / cr$plot() / cr$plotLegend() + patchwork::plot_layout(ncol=1, heights = c(1,1,0.1))
#) %>% standardPrintOutput::saveHalfPageFigure("~/Dropbox/classifierResult/clotting")
cr$plotRoc()
cr$plotRoc()
ggplot(tmp, aes(x=false_pos_rate, y=true_pos_rate))+
geom_path()+
geom_rug(aes(colour=obs), alpha=0.1, show.legend = FALSE) +
scale_fill_brewer(type="qual",palette="Set1",aesthetics = c("colour", "fill"))+
ggnewscale::new_scale_colour()+
xlab("false positive rate")+
ylab("true positive rate")+
geom_segment(x=0,y=0, xend=1, yend=1, colour="grey75",linetype="dashed")+
expand_limits(x=c(0,1),y=c(0,1))+
annotate("text",x=0.99,y=0.01,label=paste0(
"AUROC=",sprintf("%.3f",stats$auroc)
),vjust=0,hjust=1,size=(10/ggplot2:::.pt/(96/72)))+
geom_point(aes(x=false_pos_rate, y=true_pos_rate, colour=max_of),data=annotations,alpha=0.75)+
scale_colour_brewer(type="qual",palette="Dark2")+
guides(colour="none")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plotRoc()
cr$plotPR()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plotDensity()
cr$plot()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plotRoc()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plotDensity()
cr$plotRoc()
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plotRoc()
cr$plotDensity()
cr$plotPR()
cr$plot()
cr$plotPR()
cr$distributionStats()
tibble(cr$distributionStats())
tibble(statistic = names(cr$distributionStats()), value=cr$distributionStats())
tibble(statistic = names(cr$distributionStats()), value=unname(cr$distributionStats()))
tibble(statistic = names(cr$distributionStats()), value=unlist(unname(cr$distributionStats())))
tibble(statistic = names(cr$distributionStats()), value=unlist(unname(cr$distributionStats()))) %>%
standardPrintOutput::saveTable("~/Dropbox/classifierResult/clottingSummary")
devtools::load_all()
cr = ClassifierResult$fromPredictions(inr.predictions,inr.obs)
cr$plotRoc() %>%
standardPrintOutput::saveSixthPageFigure("~/Dropbox/classifierResult/clottingRoc")
